<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Destiny</title>
    <link rel="stylesheet" href="main.css">
    <script src="main.js"></script>
  </head>
  <body>
    <div id="main"></div>
    <script>
      const app = Elm.Main.init({
        node: document.getElementById("main")
      });

      const host = location.host || "localhost:3000";
      const socket = new WebSocket("ws://" + host);
      socket.addEventListener("message", event => app.ports.receive.send(JSON.parse(event.data)));
      app.ports.send.subscribe(data => socket.send(JSON.stringify(data)));
    </script>
  </body>
</html>
